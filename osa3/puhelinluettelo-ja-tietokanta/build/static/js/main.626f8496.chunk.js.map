{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","filterByName","handleFilterByName","f","value","onChange","PersonForm","newName","handleNameChange","newNumber","handleNewNumber","handleSubmit","type","onClick","Persons","personsToShow","handlePersonDelete","map","person","name","number","id","notificationStyle","border","backgroundColor","fontSize","color","padding","Notification","message","style","baseUrl","exportBundle","getAll","axios","get","then","response","data","postPerson","newPerson","request","post","deletePerson","personId","url","delete","updatePerson","put","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterByName","errorMessage","setErrorMessage","notifyUser","setTimeout","useEffect","personService","catch","error","filter","toLowerCase","includes","event","target","preventDefault","undefined","find","x","window","confirm","update","concat","console","log","updatedPersonList","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.626f8496.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({\n  filterByName = '',\n  handleFilterByName = f => f,\n}) => {\n  return (\n    <p>\n      filter shown with{' '}\n      <input\n        value={filterByName}\n        onChange={handleFilterByName}\n      />\n    </p>\n  );\n\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = ({\n  newName = '',\n  handleNameChange = f => f,\n  newNumber = '',\n  handleNewNumber = f => f,\n  handleSubmit = f => f,\n}) => {\n\n  return (\n    <form>\n      <div>\n        name:{' '}\n        <input\n          value={newName}\n          onChange={handleNameChange}\n        />\n      </div>\n      <div>\n        number:{' '}\n        <input\n          value={newNumber}\n          onChange={handleNewNumber}\n        />\n      </div>\n      <div>\n        <button\n          type=\"submit\"\n          onClick={handleSubmit}\n        >\n          add\n           </button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({\n  personsToShow = [],\n  handlePersonDelete = f => f,\n}) => {\n  return (\n    <>\n      {\n        personsToShow.map(person => {\n          return (<p key={person.id}>\n            {person.name} {person.number} {' '}\n            <button onClick={() => handlePersonDelete(person)}>delete</button>\n          </p>);\n        })\n      }\n    </>\n  );\n};\n\nexport default Persons;\n","import React from 'react';\n\nconst notificationStyle = {\n  border: '2px solid blue',\n  backgroundColor: 'lightgray',\n  fontSize: '2rem',\n  color: 'white',\n  padding: '5px',\n};\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return (\n    <div style={notificationStyle}>\n      {message}\n    </div>\n  );\n};\n\nexport default Notification;\n","import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst postPerson = (newPerson = {}) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then(response => response.data);\n}\n\nconst deletePerson = (personId = '') => {\n  const url = `${baseUrl}/${personId}`;\n  const request = axios.delete(url);\n  return request.then(response => response.data);\n}\n\nconst updatePerson = (person = '') => {\n  const url = `${baseUrl}/${person.id}`;\n  const request = axios.put(url, person);\n  return request.then(response => response.data);\n};\n\n// This removes the following notification\n// \"Assign object to a variable before exporting as module default  import/no-anonymous-default-export\"\nconst exportBundle = {\n  getAll,\n  postPerson,\n  deletePerson,\n  updatePerson,\n}\n\nexport default exportBundle;\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\nimport personService from './services/persons';\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filterByName, setFilterByName] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // Helper function to reduce copypaste for notifying the user\n  const notifyUser = (message) => {\n    setErrorMessage(message);\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, 5000);\n  };\n\n  // Get all the persons from the server to a local list\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        //console.log('promise fullfilled', response);\n        setPersons(response);\n      })\n      .catch(error => {\n        notifyUser(`Error while fetching (GET) person data from the server: ${error}`);\n        setPersons([]);\n      });\n  }, []);\n\n  // Submit the data to the server\n  // Either\n  //  (1) add a new person\n  //  (2) update existing person's phone number\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    //console.log('name', newName === '');\n    if (newName === '' || newNumber === '') {\n      return;\n    }\n\n    // Update an existing person\n    if (persons.find(x => x.name === newName) !== undefined) {\n      const result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`);\n      if (result !== true) {\n        return;\n      }\n\n      const person = persons.find(x => x.name === newName);\n      const updatePerson = {\n        ...person,\n        number: newNumber,\n      }\n\n      personService\n        .updatePerson(updatePerson)\n        .then(response => {\n          //console.log(response);\n          // Update the local copy of persons\n          const update = persons.map(person => {\n            return person.id === response.id ? { ...person, number: response.number } : person;\n          });\n          setPersons(update);\n          notifyUser(`Updated ${response.name}'s phone number`);\n        })\n        .catch(error =>\n          notifyUser(`Error while updating (PUT) new person data ${updatePerson.name} to the server: ${error.response.data.error}`));\n    }\n    // Add a new person\n    else {\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n      };\n      personService\n        .postPerson(newPerson)\n        .then(response => {\n          //console.log(response);\n          setPersons(persons.concat(response));\n          notifyUser(`Added ${response.name}`);\n        })\n        .catch(error => {\n          console.log(error.response.data.error);\n          notifyUser(`Error while posting (POST) new person data to the server: ${error.response.data.error}`)\n        });\n    }\n\n    setNewName('');\n    setNewNumber('');\n  };\n\n  // Delete a person from the server\n  const handlePersonDelete = (person) => {\n    console.log('Delete :: person', person.name);\n    const result = window.confirm(`Delete ${person.name}`);\n    if (result !== true) {\n      return;\n    }\n\n    personService\n      .deletePerson(person.id)\n      .then(response => {\n        const updatedPersonList = persons.filter(x => x.id !== person.id);\n        //console.log(updatedPersonList);\n        setPersons(updatedPersonList);\n        notifyUser(`Deleted ${person.name}`);\n      }\n      )\n      .catch(error => notifyUser(`Error while deleting (DELETE) person (${person.name}) data from the server:\n                                  Maybe the person has been removed from the server :: ${error}`));\n  }\n\n  const handleNameChange = (event) => {\n    //console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterByName = (event) => {\n    setFilterByName(event.target.value);\n  };\n\n  const personsToShow = filterByName === ''\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filterByName.toLowerCase()));\n\n  //console.log(personsToShow);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={errorMessage} />\n\n      <Filter\n        filterByName={filterByName}\n        handleFilterByName={handleFilterByName}\n      />\n\n      <h3>Add a new</h3>\n\n      <PersonForm\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNewNumber={handleNewNumber}\n        handleSubmit={handleSubmit}\n      />\n\n      <h3>Numbers</h3>\n\n      <Persons\n        personsToShow={personsToShow}\n        handlePersonDelete={handlePersonDelete}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}