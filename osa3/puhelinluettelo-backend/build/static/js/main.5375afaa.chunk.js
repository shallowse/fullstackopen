(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(1),c=t.n(o),a=t(15),i=t.n(a),u=t(6),d=t(3),s=function(e){var n=e.filterByName,t=void 0===n?"":n,o=e.handleFilterByName,c=void 0===o?function(e){return e}:o;return Object(r.jsxs)("p",{children:["filter shown with"," ",Object(r.jsx)("input",{value:t,onChange:c})]})},l=function(e){var n=e.newName,t=void 0===n?"":n,o=e.handleNameChange,c=void 0===o?function(e){return e}:o,a=e.newNumber,i=void 0===a?"":a,u=e.handleNewNumber,d=void 0===u?function(e){return e}:u,s=e.handleSubmit,l=void 0===s?function(e){return e}:s;return Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{children:["name:"," ",Object(r.jsx)("input",{value:t,onChange:c})]}),Object(r.jsxs)("div",{children:["number:"," ",Object(r.jsx)("input",{value:i,onChange:d})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",onClick:l,children:"add"})})]})},h=function(e){var n=e.personsToShow,t=void 0===n?[]:n,o=e.handlePersonDelete,c=void 0===o?function(e){return e}:o;return Object(r.jsx)(r.Fragment,{children:t.map((function(e){return Object(r.jsxs)("p",{children:[e.name," ",e.number," "," ",Object(r.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.id)}))})},f={border:"2px solid blue",backgroundColor:"lightgray",fontSize:"2rem",color:"white",padding:"5px"},b=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{style:f,children:n})},j=t(4),m=t.n(j),v="/api/persons",p={getAll:function(){return m.a.get(v).then((function(e){return e.data}))},postPerson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=m.a.post(v,e);return n.then((function(e){return e.data}))},deletePerson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n="".concat(v,"/").concat(e),t=m.a.delete(n);return t.then((function(e){return e.data}))},updatePerson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n="".concat(v,"/").concat(e.id),t=m.a.put(n,e);return t.then((function(e){return e.data}))}},O=function(){var e=Object(o.useState)([]),n=Object(d.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),i=Object(d.a)(a,2),f=i[0],j=i[1],m=Object(o.useState)(""),v=Object(d.a)(m,2),O=v[0],g=v[1],w=Object(o.useState)(""),x=Object(d.a)(w,2),N=x[0],S=x[1],P=Object(o.useState)(null),y=Object(d.a)(P,2),C=y[0],E=y[1],k=function(e){E(e),setTimeout((function(){E(null)}),5e3)};Object(o.useEffect)((function(){p.getAll().then((function(e){c(e)})).catch((function(e){k("Error while fetching (GET) person data from the server: ".concat(e)),c([])}))}),[]);var D=""===N?t:t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(b,{message:C}),Object(r.jsx)(s,{filterByName:N,handleFilterByName:function(e){S(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(l,{newName:f,handleNameChange:function(e){j(e.target.value)},newNumber:O,handleNewNumber:function(e){g(e.target.value)},handleSubmit:function(e){if(e.preventDefault(),""!==f&&""!==O){if(void 0!==t.find((function(e){return e.name===f}))){if(!0!==window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?")))return;var n=t.find((function(e){return e.name===f})),r=Object(u.a)(Object(u.a)({},n),{},{number:O});p.updatePerson(r).then((function(e){var n=t.map((function(n){return n.id===e.id?e:n}));c(n),k("Updated ".concat(e.name,"'s phone number"))})).catch((function(e){return k("Error while updating (PUT) new person data ".concat(r.name," to the server: ").concat(e.response.data.error))}))}else{var o={name:f,number:O};p.postPerson(o).then((function(e){c(t.concat(e)),k("Added ".concat(e.name))})).catch((function(e){console.log(e.response.data.error),k("Error while posting (POST) new person data to the server: ".concat(e.response.data.error))}))}j(""),g("")}}}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(h,{personsToShow:D,handlePersonDelete:function(e){console.log("Delete :: person",e.name),!0===window.confirm("Delete ".concat(e.name))&&p.deletePerson(e.id).then((function(n){var r=t.filter((function(n){return n.id!==e.id}));c(r),k("Deleted ".concat(e.name))})).catch((function(n){return k("Error while deleting (DELETE) person (".concat(e.name,") data from the server:\n                                  Maybe the person has been removed from the server :: ").concat(n))}))}})]})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(O,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.5375afaa.chunk.js.map